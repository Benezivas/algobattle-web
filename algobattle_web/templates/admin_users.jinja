{% extends "base.jinja" %}
{% block content %}

<script src="/static/scripts/admin_users.js" type="module"></script>

<template id="table_row">
  <td>
    <span>${user.name} </span>
    <i v-if="user.is_admin" class="bi bi-patch-check-fill text-success" data-bs-toggle="tooltip" data-bs-placement="right" title="Admin"></i>
  </td>
  <td><span>${user.email}</span></td>
  <td><span>${user.teams?.join(", ")}</span></td>
  <td class="text-end">
    <button v-if="user.id != '{{user.id}}'" type="button" class="btn btn-warning btn-sm" data-bs-toggle="tooltip" title="Edit user"><i class="bi bi-pencil"></i></button>
  </td>
</template>


<div class="col-8" id="app">
  <h3>Users</h3>
  <table class="table" id="users">
    <thead>
      <tr>
        <th scope="col">Name</th>
        <th scope="col">Email</th>
        <th scope="col">Teams</th>
        <th scope="col"></th>
      </tr>
    </thead>
    <tbody>
    {% for usr in users %}
      <tr v-scope='TableRow({{usr | tojson}})' {% if user == usr %} class="table-primary" {% endif %}></tr>
    {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}
