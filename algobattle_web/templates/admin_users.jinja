{% extends "base.jinja" %}
{% block content %}

<div class="col-8">
  <h3>Users</h3>
  <table class="table">
    <thead>
      <tr>
        <th scope="col">Name</th>
        <th scope="col">Email</th>
        <th scope="col">Teams</th>
        <th scope="col"></th>
      </tr>
    </thead>
    <tbody>
    {% for usr in users %}
      <tr {% if usr == user %} class="table-primary" {% endif %}>
        <td>{{ usr.name }}{%if usr.is_admin%} <i class="bi bi-patch-check-fill text-success" data-bs-toggle="tooltip" data-bs-placement="right" title="Admin"></i>{%endif%}</td>
        <td>{{ usr.email }}</td>
        <td>{{ usr.teams | join(", ") }}</td>
        <td class="text-end">
          <div class="btn-group btn-group-sm" role="group" aria-label="Edit user">
            {% if usr != user %}
            <button type="button" class="btn btn-success" data-bs-toggle="tooltip" title="{{'Remove' if usr.is_admin else 'Make'}} admin">
              <i class="bi bi-patch-{{'minus' if usr.is_admin else 'plus'}}"></i>
            </button>
            <button type="button" class="btn btn-warning" data-bs-toggle="tooltip" title="Edit"><i class="bi bi-pencil"></i></button>
            <button type="button" class="btn btn-danger" data-bs-toggle="tooltip" title="Delete"><i class="bi bi-x"></i></button>
            {% endif %}
          </div>
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}
